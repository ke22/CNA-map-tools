<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logger æ¨¡å—æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 4px;
            border-left: 4px solid #2196f3;
        }
        .test-section h2 {
            margin-top: 0;
            color: #2196f3;
            font-size: 18px;
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #1976d2;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 4px;
            font-size: 14px;
            color: #1976d2;
        }
        .success {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .error {
            background: #ffebee;
            color: #c62828;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
        }
        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” Logger æ¨¡å—æµ‹è¯•</h1>
        <p class="subtitle">æµ‹è¯•æ–°çš„æ ¸å¿ƒ Logger æ¨¡å—åŠŸèƒ½</p>
        
        <div class="test-section">
            <h2>1. åŸºæœ¬æ—¥å¿—åŠŸèƒ½æµ‹è¯•</h2>
            <p>æµ‹è¯•å„ç§æ—¥å¿—çº§åˆ«æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
            <button onclick="testBasicLogging()">è¿è¡ŒåŸºæœ¬æ—¥å¿—æµ‹è¯•</button>
            <div id="basic-result" class="result" style="display:none;"></div>
        </div>
        
        <div class="test-section">
            <h2>2. æ—¥å¿—çº§åˆ«æ§åˆ¶æµ‹è¯•</h2>
            <p>æµ‹è¯•æ—¥å¿—çº§åˆ«è¿‡æ»¤åŠŸèƒ½</p>
            <button onclick="testLogLevels()">è¿è¡Œçº§åˆ«æ§åˆ¶æµ‹è¯•</button>
            <div id="level-result" class="result" style="display:none;"></div>
        </div>
        
        <div class="test-section">
            <h2>3. æ•°æ®æ—¥å¿—æµ‹è¯•</h2>
            <p>æµ‹è¯•å¸¦æ•°æ®çš„æ—¥å¿—è¾“å‡º</p>
            <button onclick="testDataLogging()">è¿è¡Œæ•°æ®æ—¥å¿—æµ‹è¯•</button>
            <div id="data-result" class="result" style="display:none;"></div>
        </div>
        
        <div class="test-section">
            <h2>4. æ€§èƒ½è®¡æ—¶æµ‹è¯•</h2>
            <p>æµ‹è¯•æ€§èƒ½è®¡æ—¶åŠŸèƒ½</p>
            <button onclick="testPerformance()">è¿è¡Œæ€§èƒ½æµ‹è¯•</button>
            <div id="perf-result" class="result" style="display:none;"></div>
        </div>
        
        <div class="test-section">
            <h2>5. å…¼å®¹æ€§æµ‹è¯•</h2>
            <p>æµ‹è¯•ä¸ç°æœ‰ä»£ç çš„å…¼å®¹æ€§</p>
            <button onclick="testCompatibility()">è¿è¡Œå…¼å®¹æ€§æµ‹è¯•</button>
            <div id="compat-result" class="result" style="display:none;"></div>
        </div>
        
        <div class="test-section">
            <h2>6. æ§åˆ¶å°è¾“å‡º</h2>
            <p>æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡ºï¼ˆæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼‰</p>
            <div class="console-output" id="console-output">
                <div style="color: #888;">æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º...</div>
            </div>
        </div>
    </div>
    
    <!-- Load Logger Module -->
    <script src="js/core/Logger.js"></script>
    
    <script>
        // Capture console output
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsoleOutput(type, ...args) {
            const div = document.createElement('div');
            const timestamp = new Date().toLocaleTimeString();
            const typeColor = {
                'log': '#4caf50',
                'warn': '#ff9800',
                'error': '#f44336',
                'info': '#2196f3'
            };
            div.innerHTML = `<span style="color: #888;">[${timestamp}]</span> <span style="color: ${typeColor[type] || '#fff'};">[${type.toUpperCase()}]</span> ${args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ')}`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsoleOutput('log', ...args);
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsoleOutput('warn', ...args);
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsoleOutput('error', ...args);
        };
        
        // Test functions
        function testBasicLogging() {
            const result = document.getElementById('basic-result');
            result.style.display = 'block';
            
            try {
                Logger.info('è¿™æ˜¯ä¸€æ¡ä¿¡æ¯æ—¥å¿—');
                Logger.warn('è¿™æ˜¯ä¸€æ¡è­¦å‘Šæ—¥å¿—');
                Logger.error('è¿™æ˜¯ä¸€æ¡é”™è¯¯æ—¥å¿—');
                Logger.debug('è¿™æ˜¯ä¸€æ¡è°ƒè¯•æ—¥å¿—');
                Logger.success('è¿™æ˜¯ä¸€æ¡æˆåŠŸæ—¥å¿—');
                Logger.trace('è¿™æ˜¯ä¸€æ¡è¿½è¸ªæ—¥å¿—');
                
                result.className = 'result success';
                result.innerHTML = 'âœ… æ‰€æœ‰åŸºæœ¬æ—¥å¿—åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼<br>è¯·æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºç¡®è®¤æ ¼å¼æ­£ç¡®ã€‚';
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        function testLogLevels() {
            const result = document.getElementById('level-result');
            result.style.display = 'block';
            
            try {
                result.innerHTML = '<strong>æµ‹è¯•ä¸åŒæ—¥å¿—çº§åˆ«ï¼š</strong><br><br>';
                
                // Test 'error' level (should only show errors)
                Logger.setLevel('error');
                result.innerHTML += '<code>Logger.setLevel("error")</code> - åº”è¯¥åªæ˜¾ç¤ºé”™è¯¯æ—¥å¿—<br>';
                Logger.info('è¿™æ¡ä¿¡æ¯ä¸åº”è¯¥æ˜¾ç¤º');
                Logger.warn('è¿™æ¡è­¦å‘Šä¸åº”è¯¥æ˜¾ç¤º');
                Logger.error('è¿™æ¡é”™è¯¯åº”è¯¥æ˜¾ç¤º âœ…');
                
                // Test 'warn' level
                Logger.setLevel('warn');
                result.innerHTML += '<br><code>Logger.setLevel("warn")</code> - åº”è¯¥æ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯<br>';
                Logger.info('è¿™æ¡ä¿¡æ¯ä¸åº”è¯¥æ˜¾ç¤º');
                Logger.warn('è¿™æ¡è­¦å‘Šåº”è¯¥æ˜¾ç¤º âœ…');
                Logger.error('è¿™æ¡é”™è¯¯åº”è¯¥æ˜¾ç¤º âœ…');
                
                // Test 'info' level
                Logger.setLevel('info');
                result.innerHTML += '<br><code>Logger.setLevel("info")</code> - åº”è¯¥æ˜¾ç¤ºä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯<br>';
                Logger.info('è¿™æ¡ä¿¡æ¯åº”è¯¥æ˜¾ç¤º âœ…');
                Logger.warn('è¿™æ¡è­¦å‘Šåº”è¯¥æ˜¾ç¤º âœ…');
                Logger.error('è¿™æ¡é”™è¯¯åº”è¯¥æ˜¾ç¤º âœ…');
                Logger.debug('è¿™æ¡è°ƒè¯•ä¸åº”è¯¥æ˜¾ç¤º');
                
                // Reset to 'info'
                Logger.setLevel('info');
                
                result.className = 'result success';
                result.innerHTML += '<br><br>âœ… æ—¥å¿—çº§åˆ«æ§åˆ¶æµ‹è¯•é€šè¿‡ï¼';
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        function testDataLogging() {
            const result = document.getElementById('data-result');
            result.style.display = 'block';
            
            try {
                const testData = {
                    name: 'æµ‹è¯•æ•°æ®',
                    value: 123,
                    nested: {
                        key: 'value'
                    }
                };
                
                Logger.info('å¸¦æ•°æ®çš„æ—¥å¿—', testData);
                Logger.error('å¸¦é”™è¯¯æ•°æ®çš„æ—¥å¿—', { error: 'æµ‹è¯•é”™è¯¯', code: 500 });
                
                result.className = 'result success';
                result.innerHTML = 'âœ… æ•°æ®æ—¥å¿—æµ‹è¯•é€šè¿‡ï¼<br>è¯·æŸ¥çœ‹æ§åˆ¶å°ç¡®è®¤æ•°æ®æ ¼å¼æ­£ç¡®ã€‚';
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        function testPerformance() {
            const result = document.getElementById('perf-result');
            result.style.display = 'block';
            
            try {
                Logger.setLevel('debug'); // Enable debug for performance logs
                
                Logger.time('test-operation');
                // Simulate some work
                let sum = 0;
                for (let i = 0; i < 1000000; i++) {
                    sum += i;
                }
                Logger.timeEnd('test-operation');
                
                result.className = 'result success';
                result.innerHTML = 'âœ… æ€§èƒ½è®¡æ—¶æµ‹è¯•é€šè¿‡ï¼<br>è¯·æŸ¥çœ‹æ§åˆ¶å°ç¡®è®¤è®¡æ—¶è¾“å‡ºã€‚';
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        function testCompatibility() {
            const result = document.getElementById('compat-result');
            result.style.display = 'block';
            
            try {
                const checks = [];
                
                // Check if Logger is available
                checks.push({
                    name: 'Logger å¯¹è±¡å­˜åœ¨',
                    pass: typeof Logger !== 'undefined',
                    value: typeof Logger
                });
                
                // Check if methods exist
                const methods = ['info', 'warn', 'error', 'debug', 'success', 'trace', 'setLevel'];
                methods.forEach(method => {
                    checks.push({
                        name: `Logger.${method} æ–¹æ³•å­˜åœ¨`,
                        pass: typeof Logger[method] === 'function',
                        value: typeof Logger[method]
                    });
                });
                
                // Check if window.Logger exists (backward compatibility)
                checks.push({
                    name: 'window.Logger å­˜åœ¨ï¼ˆå‘åå…¼å®¹ï¼‰',
                    pass: typeof window.Logger !== 'undefined',
                    value: typeof window.Logger
                });
                
                // Check if quick access functions exist
                const quickAccess = ['log', 'logError', 'logWarn', 'logDebug', 'logSuccess'];
                quickAccess.forEach(func => {
                    checks.push({
                        name: `window.${func} å­˜åœ¨ï¼ˆå¿«é€Ÿè®¿é—®ï¼‰`,
                        pass: typeof window[func] === 'function',
                        value: typeof window[func]
                    });
                });
                
                // Display results
                let html = '<strong>å…¼å®¹æ€§æ£€æŸ¥ç»“æœï¼š</strong><br><br>';
                let allPass = true;
                checks.forEach(check => {
                    const status = check.pass ? 'âœ…' : 'âŒ';
                    const color = check.pass ? '#2e7d32' : '#c62828';
                    html += `${status} <span style="color: ${color};">${check.name}</span> (${check.value})<br>`;
                    if (!check.pass) allPass = false;
                });
                
                result.className = allPass ? 'result success' : 'result error';
                result.innerHTML = html + (allPass ? '<br>âœ… æ‰€æœ‰å…¼å®¹æ€§æ£€æŸ¥é€šè¿‡ï¼' : '<br>âŒ éƒ¨åˆ†æ£€æŸ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Logger æ¨¡å—ã€‚');
            } catch (error) {
                result.className = 'result error';
                result.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // Auto-run compatibility test on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                testCompatibility();
            }, 100);
        });
    </script>
</body>
</html>

