# Mapbox 免費帳號使用指南

## 🆓 免費帳號限制

### 上傳限制

| 項目 | 免費帳號限制 | 您的文件 | 狀態 |
|------|------------|---------|------|
| **單個文件大小** | 10 GB | 最大 8.4 GB | ✅ 符合 |
| **瓦片集數量** | 20 個 | 3 個 | ✅ 符合 |
| **存儲空間** | 無限制* | 21.4 GB | ⚠️ 注意 |
| **API 請求** | 50,000/月 | - | ✅ 符合 |

*存儲空間：免費帳號可以使用，但大文件會影響性能

### 您的文件情況

- ✅ Level 0: 8.4 GB (< 10 GB 限制)
- ✅ Level 1: 6.4 GB (< 10 GB 限制)
- ✅ Level 2: 6.6 GB (< 10 GB 限制)

**好消息：** 所有文件都在單個文件大小限制內！

---

## ⚠️ 免費帳號注意事項

### 1. 處理時間可能較長

免費帳號的處理優先級較低：
- 小文件（< 1 GB）：10-30 分鐘
- 中等文件（1-5 GB）：30 分鐘到 2 小時
- 大文件（> 5 GB）：**2-6 小時或更長**

**建議：**
- 準備等待較長時間
- 可以在上傳後關閉瀏覽器，Mapbox 會繼續處理
- 處理完成後會收到通知（如果設置了）

### 2. 性能考慮

雖然免費帳號可以使用，但大文件可能導致：
- 加載速度較慢
- 需要等待處理完成

---

## 🎯 免費帳號推薦方案

### 方案 A: 直接上傳（當前文件）

**適用於：**
- 測試和開發
- 小規模使用

**步驟：**
1. 按正常流程上傳
2. 等待處理完成（可能需要幾小時）
3. 使用生成的照片集

**優點：** 簡單直接  
**缺點：** 處理時間長，文件較大

---

### 方案 B: 先優化再上傳（推薦）

**適用於：**
- 免費帳號
- 需要更快處理
- 減少存儲使用

**步驟：**

1. **簡化 MBTiles 文件**

```bash
# 使用 mapshaper 進一步簡化
# 這會減少文件大小和處理時間

# 從 MBTiles 提取 GeoJSON（如果需要的話）
# 或者直接使用簡化過的 GeoJSON 重新生成 MBTiles
```

2. **使用更激進的簡化參數重新轉換**

```bash
# 編輯轉換腳本，增加簡化參數
# 例如：減少最大縮放級別
tippecanoe \
  -z12 -Z0 \  # 從 z14 降低到 z12
  --drop-densest-as-needed \
  data/gadm/gadm_level0.geojson \
  -o data/gadm/tiles/gadm_level0_optimized.mbtiles
```

3. **上傳優化版本**

優化後的文件：
- 更小（可能減少 50-70%）
- 處理更快
- 仍然足夠詳細用於大多數用途

---

### 方案 C: 使用方案 1（簡化 GeoJSON）

如果矢量瓦片上傳有問題，可以回到方案 1：

```bash
# 使用簡化優化版本
./scripts/optimize-gadm.sh
```

這會生成更小的 GeoJSON 文件（50-400 MB），可以直接在應用中使用。

---

## 💡 免費帳號最佳實踐

### 1. 分批上傳

不要同時上傳所有文件：
- 先上傳 Level 0（最小）
- 等待處理完成並測試
- 再決定是否上傳 Level 1 和 Level 2

### 2. 監控使用量

- 訪問：https://account.mapbox.com/
- 查看 API 使用情況
- 確保不超過免費額度

### 3. 考慮簡化

對於免費帳號，建議：
- 使用 z12 而不是 z14（足夠詳細）
- 啟用 `--drop-densest-as-needed`
- 可以稍微簡化數據

---

## 📋 免費帳號上傳清單

在開始上傳前：

- [ ] 確認文件大小 < 10 GB（✅ 已確認）
- [ ] 準備等待 2-6 小時處理時間
- [ ] 記錄 Tileset ID 以便後續使用
- [ ] 考慮是否先優化文件

---

## 🚀 開始上傳

### 推薦方式：網頁上傳

1. 訪問：https://studio.mapbox.com/tilesets/
2. 上傳文件（一次一個，先從 Level 0 開始）
3. 等待處理完成
4. 測試後再上傳其他級別

### 或使用簡化方案

如果上傳/處理太慢，可以：
1. 使用 `./scripts/optimize-gadm.sh` 簡化 GeoJSON
2. 直接在應用中使用優化的 GeoJSON（方案 1）

---

## ❓ 常見問題

**Q: 免費帳號可以上傳大文件嗎？**
A: 可以，只要單個文件 < 10 GB（您的文件符合）。

**Q: 處理需要多長時間？**
A: 大文件可能需要 2-6 小時，請耐心等待。

**Q: 可以加速處理嗎？**
A: 付費帳號有優先處理，但免費帳號也可以正常使用。

**Q: 如果超出限制怎麼辦？**
A: 使用方案 1（簡化 GeoJSON）或優化文件。

---

## 🎯 建議

對於免費帳號，我建議：

1. **先試上傳 Level 0**（最小，8.4 GB）
2. **等待處理完成並測試**
3. **如果成功，繼續上傳其他級別**
4. **如果太慢或遇到問題，使用方案 1（優化 GeoJSON）**

您現在可以選擇：
- 直接上傳（可能需要等待較長時間）
- 或使用簡化方案（更快，但需要重新生成文件）


