# ðŸ”‘ API å¯†é’¥æ”¾ç½®ä½ç½®æŒ‡å—

## æŽ¨èæ–¹å¼ï¼šåŽç«¯ä»£ç†æ¨¡å¼ï¼ˆç”Ÿäº§çŽ¯å¢ƒï¼‰

### ä½ç½®ï¼šæœåŠ¡å™¨çŽ¯å¢ƒå˜é‡

#### æ–¹æ³• 1ï¼šç›´æŽ¥è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶ï¼‰

åœ¨å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰è¿è¡Œï¼š

```bash
export GEMINI_API_KEY="your-actual-api-key-here"
node server-combined.js
```

#### æ–¹æ³• 2ï¼šä½¿ç”¨ .env æ–‡ä»¶ï¼ˆæŽ¨èï¼‰

1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cd /Users/yulincho/Documents/GitHub/map
echo 'GEMINI_API_KEY=your-actual-api-key-here' > .env
```

2. ç¡®ä¿ `.env` æ–‡ä»¶åœ¨ `.gitignore` ä¸­ï¼ˆå·²é…ç½®ï¼‰âœ…

3. å¯åŠ¨æœåŠ¡å™¨ï¼š

```bash
node server-combined.js
```

#### æ–¹æ³• 3ï¼šåœ¨å¯åŠ¨å‘½ä»¤ä¸­è®¾ç½®

```bash
GEMINI_API_KEY="your-actual-api-key-here" node server-combined.js
```

## å¤‡ç”¨æ–¹å¼ï¼šå‰ç«¯é…ç½®ï¼ˆä»…å¼€å‘çŽ¯å¢ƒï¼‰

å¦‚æžœæš‚æ—¶ä¸ä½¿ç”¨åŽç«¯ä»£ç†ï¼Œå¯ä»¥æ”¾åœ¨ `config.js` ä¸­ï¼š

```javascript
// config.js
GEMINI: {
    USE_BACKEND_PROXY: false,  // ç¦ç”¨åŽç«¯ä»£ç†
    API_KEY: 'your-actual-api-key-here',  // ç›´æŽ¥æ”¾åœ¨è¿™é‡Œ
    ENABLED: true
}
```

âš ï¸ **æ³¨æ„**ï¼šè¿™ç§æ–¹å¼ä¸æŽ¨èç”¨äºŽç”Ÿäº§çŽ¯å¢ƒï¼

## å¿«é€Ÿè®¾ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šèŽ·å– API å¯†é’¥

1. è®¿é—®ï¼šhttps://aistudio.google.com/app/apikey
2. ç‚¹å‡» "Create API Key"
3. å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥

### æ­¥éª¤ 2ï¼šè®¾ç½®çŽ¯å¢ƒå˜é‡

**æŽ¨èæ–¹å¼**ï¼šåˆ›å»º `.env` æ–‡ä»¶

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
cd /Users/yulincho/Documents/GitHub/map

# åˆ›å»º .env æ–‡ä»¶ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰
cat > .env << 'ENVEOF'
GEMINI_API_KEY=your-actual-api-key-here
ENVEOF

# éªŒè¯æ–‡ä»¶å·²åˆ›å»ºï¼ˆä¸è¦æ˜¾ç¤ºå®žé™…å†…å®¹ï¼‰
echo "âœ… .env æ–‡ä»¶å·²åˆ›å»º"
```

### æ­¥éª¤ 3ï¼šå¯åŠ¨æœåŠ¡å™¨

```bash
node server-combined.js
```

æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºï¼š
```
âœ… API Key: Set (hidden)
```

## éªŒè¯å¯†é’¥æ˜¯å¦è®¾ç½®

å¯åŠ¨æœåŠ¡å™¨åŽï¼Œæ£€æŸ¥æŽ§åˆ¶å°è¾“å‡ºï¼š

```
ðŸ”’ Gemini API Proxy:
   Endpoint: http://localhost:8000/api/gemini/generateContent
   âœ… API Key: Set (hidden)  â† è¿™è¯´æ˜Žå¯†é’¥å·²è®¾ç½®
```

å¦‚æžœæ˜¯ï¼š
```
âš ï¸  API Key: Not set!  â† è¿™è¯´æ˜Žå¯†é’¥æœªè®¾ç½®
```

## æ–‡ä»¶ä½ç½®æ€»ç»“

| æ–¹å¼ | å¯†é’¥ä½ç½® | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|
| âœ… æŽ¨è | æœåŠ¡å™¨çŽ¯å¢ƒå˜é‡ (.env) | ç”Ÿäº§çŽ¯å¢ƒ |
| âœ… æŽ¨è | `export GEMINI_API_KEY=...` | å¼€å‘/æµ‹è¯• |
| âš ï¸ ä¸æŽ¨è | config.js | ä»…æœ¬åœ°å¼€å‘ |

## å®‰å…¨æç¤º

- âœ… `.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ° Git
- âœ… åŽç«¯ä»£ç†æ¨¡å¼ï¼šå¯†é’¥åªåœ¨æœåŠ¡å™¨ç«¯ï¼Œå‰ç«¯çœ‹ä¸åˆ°
- âŒ ä¸è¦å°†å¯†é’¥æäº¤åˆ° Git
- âŒ ä¸è¦åœ¨å‰ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥

## å½“å‰é…ç½®æ£€æŸ¥

æ£€æŸ¥ `config.js`ï¼š

```javascript
USE_BACKEND_PROXY: true  // âœ… ä½¿ç”¨åŽç«¯ä»£ç†ï¼ˆå¯†é’¥åœ¨çŽ¯å¢ƒå˜é‡ï¼‰
```

è¿™æ„å‘³ç€å¯†é’¥åº”è¯¥æ”¾åœ¨ï¼š
- âœ… æœåŠ¡å™¨çŽ¯å¢ƒå˜é‡
- âœ… `.env` æ–‡ä»¶
- âŒ ä¸æ˜¯ config.js
